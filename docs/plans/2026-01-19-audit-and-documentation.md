# ĞŸĞ»Ğ°Ğ½ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ° Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Budget App

**Ğ”Ğ°Ñ‚Ğ°:** 2026-01-19
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ğ£Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ñ‘Ğ½

---

## 1. ĞĞ±Ğ·Ğ¾Ñ€ Ğ¿Ğ»Ğ°Ğ½Ğ°

### Ğ¦ĞµĞ»Ğ¸

1. **ĞÑƒĞ´Ğ¸Ñ‚ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸** â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ²ÑĞµÑ… Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
2. **ĞÑƒĞ´Ğ¸Ñ‚ ĞºĞ¾Ğ´Ğ°** â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ°Ğ¼ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° ĞºĞ¾Ğ´Ğ°
3. **Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°** â€” ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑƒĞ´Ğ¾Ğ±Ğ½Ñ‹Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ development Ğ¸ production Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ²
4. **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ** â€” Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ

### ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

- [ ] Ğ’ÑĞµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ñ‹ Ğ½Ğ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
- [ ] `npm run check-all` Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ±ĞµĞ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- [ ] Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ dev Ğ¸ prod Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ¾Ğ²
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹, API reference, Ğ¸ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾Ğ¼ Ğ¿Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ

---

## 2. ĞÑƒĞ´Ğ¸Ñ‚ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### 2.1 ĞÑƒĞ´Ğ¸Ñ‚ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

#### Auth Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ (`api/src/modules/auth/`)

| ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ |
|----------|----------|----------|
| Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ email | ĞÑˆĞ¸Ğ±ĞºĞ° 409 Ğ¿Ñ€Ğ¸ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ |
| Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | Ğ¥ĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ | bcrypt/argon2, Ğ½Ğµ plaintext |
| Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ email | Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ email Ñ‡ĞµÑ€ĞµĞ· Zod |
| Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ | ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ»Ğ¸Ğ½Ğ° |
| Ğ›Ğ¾Ğ³Ğ¸Ğ½ | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° credentials | ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğµ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ…ĞµÑˆĞµĞ¹ |
| Ğ›Ğ¾Ğ³Ğ¸Ğ½ | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ JWT | Access + Refresh Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ |
| Refresh | Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² | Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½ Ğ¸Ğ½Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ |
| Refresh | Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ replay | Ğ¢Ğ¾ĞºĞµĞ½ Ğ¾Ğ´Ğ½Ğ¾Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ |
| Logout | Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ° | Refresh token ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ Ğ¸Ğ· Ğ‘Ğ” |

#### Transactions Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ (`api/src/modules/transactions/`)

| ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ |
|----------|----------|----------|
| Create | ĞŸÑ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° | Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ° Ğº userId |
| Create | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ amount | amount > 0 |
| Create | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ type | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ INCOME Ğ¸Ğ»Ğ¸ EXPENSE |
| Create | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ category | ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¸ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| Create | Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ TRANSACTION_CREATED Ğ² RabbitMQ |
| Read | Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ |
| Update | ĞŸÑ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° | ĞĞµĞ»ÑŒĞ·Ñ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‡ÑƒĞ¶Ğ¸Ğµ |
| Delete | ĞŸÑ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° | ĞĞµĞ»ÑŒĞ·Ñ ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ Ñ‡ÑƒĞ¶Ğ¸Ğµ |

#### Budgets Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ (`api/src/modules/budgets/`)

| ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ |
|----------|----------|----------|
| Create | Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ | ĞĞ´Ğ¸Ğ½ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° Ğ¼ĞµÑÑÑ†/Ğ³Ğ¾Ğ´ Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| Create | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ° | ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¹ month (1-12), year |
| Limits | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ° | ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ |
| Limits | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ñ | ĞŸÑ€Ğ¸ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ¼ |
| Limits | Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ | Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ° |

#### Goals Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ (`api/src/modules/goals/`)

| ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ |
|----------|----------|----------|
| Create | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ target | targetAmount > 0 |
| Deposit | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑÑƒĞ¼Ğ¼Ñ‹ | amount > 0 |
| Deposit | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ° | currentAmount += amount |
| Deposit | Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ GOAL_DEPOSIT Ğ² RabbitMQ |
| Status | ĞĞ²Ñ‚Ğ¾Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ | completed = true Ğ¿Ñ€Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ target |

#### Categories Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ (`api/src/modules/categories/`)

| ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ |
|----------|----------|----------|
| Create | ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | userId Ğ² Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ |
| Read | Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ + ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ |
| Delete | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ | ĞĞµĞ»ÑŒĞ·Ñ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ |

#### Notifications ÑĞµÑ€Ğ²Ğ¸Ñ (`notifications/src/`)

| ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ |
|----------|----------|----------|
| Consumer | ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº RabbitMQ | Graceful reconnect |
| Handler | TRANSACTION_CREATED | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Telegram |
| Handler | GOAL_DEPOSIT | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Telegram |
| Settings | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ chatId | ĞŸĞ¾ userId Ğ¸Ğ· Ğ‘Ğ” |
| Telegram | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº API |

---

### 2.2 ĞÑƒĞ´Ğ¸Ñ‚ ĞºĞ¾Ğ´Ğ°

#### TypeScript strict compliance

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ğ¸
npm run typecheck
```

**Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚:**
- [ ] `strict: true` Ğ² tsconfig.json
- [ ] ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ `any` Ñ‚Ğ¸Ğ¿Ğ¾Ğ² (ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ…)
- [ ] ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ type guards Ğ´Ğ»Ñ JWT payload
- [ ] Generics Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²

#### ESLint Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¸Ğ½Ñ‚Ğ¸Ğ½Ğ³Ğ°
npm run lint
```

**Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚:**
- [ ] ĞĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº ESLint
- [ ] ĞĞµÑ‚ warnings (Ğ¸Ğ»Ğ¸ Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ disable ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸)
- [ ] no-floating-promises â€” Ğ²ÑĞµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¸ÑÑ‹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ñ‹
- [ ] no-misused-promises â€” Ğ¿Ñ€Ğ¾Ğ¼Ğ¸ÑÑ‹ Ğ½Ğµ Ğ² ÑƒÑĞ»Ğ¾Ğ²Ğ¸ÑÑ…

#### Prettier Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
npm run format:check
```

**Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚:**
- [ ] Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ ĞºĞ¾Ğ´Ğ° Ğ²Ğ¾ Ğ²ÑĞµÑ… Ñ„Ğ°Ğ¹Ğ»Ğ°Ñ…
- [ ] ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ Ğ¾Ñ‚ÑÑ‚ÑƒĞ¿Ñ‹, ĞºĞ°Ğ²Ñ‹Ñ‡ĞºĞ¸, Ğ·Ğ°Ğ¿ÑÑ‚Ñ‹Ğµ

#### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹

**Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚:**
- [ ] DDD ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑĞ¾Ğ±Ğ»ÑĞ´ĞµĞ½Ğ° Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğµ
- [ ] Repository pattern â€” Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ğ¾Ñ‚ Prisma
- [ ] Dependency Injection â€” Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿ĞµÑ€ĞµĞ´Ğ°ÑÑ‚ÑÑ ÑĞ²Ğ½Ğ¾
- [ ] AppError â€” ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- [ ] HTTP ĞºĞ¾Ğ´Ñ‹ â€” ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑÑ‹ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
- [ ] Pino Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ â€” ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸

#### Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

**Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚:**
- [ ] ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ (Prisma)
- [ ] Zod Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ²ÑĞµÑ… endpoints
- [ ] ĞĞµÑ‚ Ñ…Ğ°Ñ€Ğ´ĞºĞ¾Ğ´Ğ° ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²
- [ ] CORS Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
- [ ] Rate limiting Ñ‡ĞµÑ€ĞµĞ· Nginx

---

## 3. Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°

### 3.1 Development Ñ€ĞµĞ¶Ğ¸Ğ¼

**Ğ¤Ğ°Ğ¹Ğ»: `scripts/dev.sh`**

```bash
#!/bin/bash
set -e

echo "ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº development Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ..."

# 1. ĞŸĞ¾Ğ´Ğ½ÑÑ‚ÑŒ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ
echo "ğŸ“¦ Ğ—Ğ°Ğ¿ÑƒÑĞº PostgreSQL Ğ¸ RabbitMQ..."
docker compose up -d postgres-api postgres-notifications rabbitmq

# 2. ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ‘Ğ”
echo "â³ ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…..."
sleep 5

# 3. ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
echo "ğŸ”„ ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¹..."
cd api && bunx prisma migrate dev && cd ..
cd notifications && bunx prisma migrate dev && cd ..

# 4. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Prisma ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
echo "ğŸ”§ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Prisma ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²..."
cd api && bunx prisma generate && cd ..
cd notifications && bunx prisma generate && cd ..

# 5. Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ğ² watch Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ
echo "ğŸƒ Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²..."
echo "API: http://localhost:3000"
echo "Notifications: http://localhost:3001"
echo ""

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ñ…
npm run api:dev & npm run notifications:dev &
wait
```

**ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· package.json:**

```json
{
  "scripts": {
    "dev": "scripts/dev.sh",
    "dev:infra": "docker compose up -d postgres-api postgres-notifications rabbitmq",
    "dev:services": "npm run api:dev & npm run notifications:dev"
  }
}
```

---

### 3.2 Production Ñ€ĞµĞ¶Ğ¸Ğ¼

**Ğ¤Ğ°Ğ¹Ğ»: `docker-compose.prod.yml`**

```yaml
version: '3.8'

services:
  postgres-api:
    image: postgres:17-alpine
    container_name: budget-postgres-api-prod
    restart: unless-stopped
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: budget_api
    volumes:
      - postgres_api_data:/var/lib/postgresql/data
    networks:
      - backend
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USER} -d budget_api"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: 512M

  postgres-notifications:
    image: postgres:17-alpine
    container_name: budget-postgres-notifications-prod
    restart: unless-stopped
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: budget_notifications
    volumes:
      - postgres_notifications_data:/var/lib/postgresql/data
    networks:
      - backend
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USER} -d budget_notifications"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M

  rabbitmq:
    image: rabbitmq:4-alpine
    container_name: budget-rabbitmq-prod
    restart: unless-stopped
    environment:
      RABBITMQ_DEFAULT_USER: ${RABBITMQ_USER:-guest}
      RABBITMQ_DEFAULT_PASS: ${RABBITMQ_PASSWORD:-guest}
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    networks:
      - backend
    healthcheck:
      test: ["CMD", "rabbitmq-diagnostics", "check_running"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 30s
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M

  api:
    build:
      context: ./api
      dockerfile: Dockerfile
    container_name: budget-api-prod
    restart: unless-stopped
    environment:
      NODE_ENV: production
      PORT: 3000
      DATABASE_URL: postgresql://${DB_USER}:${DB_PASSWORD}@postgres-api:5432/budget_api
      JWT_ACCESS_SECRET: ${JWT_ACCESS_SECRET}
      JWT_REFRESH_SECRET: ${JWT_REFRESH_SECRET}
      JWT_ACCESS_EXPIRES_IN: ${JWT_ACCESS_EXPIRES_IN:-15m}
      JWT_REFRESH_EXPIRES_IN: ${JWT_REFRESH_EXPIRES_IN:-7d}
      RABBITMQ_URL: amqp://${RABBITMQ_USER:-guest}:${RABBITMQ_PASSWORD:-guest}@rabbitmq:5672
    depends_on:
      postgres-api:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy
    networks:
      - backend
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: 512M

  notifications:
    build:
      context: ./notifications
      dockerfile: Dockerfile
    container_name: budget-notifications-prod
    restart: unless-stopped
    environment:
      NODE_ENV: production
      PORT: 3001
      DATABASE_URL: postgresql://${DB_USER}:${DB_PASSWORD}@postgres-notifications:5432/budget_notifications
      RABBITMQ_URL: amqp://${RABBITMQ_USER:-guest}:${RABBITMQ_PASSWORD:-guest}@rabbitmq:5672
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
    depends_on:
      postgres-notifications:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy
    networks:
      - backend
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M

  nginx:
    build:
      context: ./nginx
      dockerfile: Dockerfile
    container_name: budget-nginx-prod
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      api:
        condition: service_healthy
    networks:
      - backend
      - frontend
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 128M

networks:
  backend:
    driver: bridge
    internal: true
  frontend:
    driver: bridge

volumes:
  postgres_api_data:
  postgres_notifications_data:
  rabbitmq_data:
```

---

**Ğ¤Ğ°Ğ¹Ğ»: `scripts/start-prod.sh`**

```bash
#!/bin/bash
set -e

echo "ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº production Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ..."

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° .env Ñ„Ğ°Ğ¹Ğ»Ğ°
if [ ! -f .env ]; then
    echo "âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: .env Ñ„Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½"
    echo "Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ .env.example Ğ² .env Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ"
    exit 1
fi

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…
source .env
required_vars=("DB_USER" "DB_PASSWORD" "JWT_ACCESS_SECRET" "JWT_REFRESH_SECRET" "TELEGRAM_BOT_TOKEN")
for var in "${required_vars[@]}"; do
    if [ -z "${!var}" ]; then
        echo "âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ $var Ğ½Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ°"
        exit 1
    fi
done

# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº
echo "ğŸ”¨ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²..."
docker compose -f docker-compose.prod.yml build

echo "ğŸƒ Ğ—Ğ°Ğ¿ÑƒÑĞº ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²..."
docker compose -f docker-compose.prod.yml up -d

echo "âœ… Production Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ¾"
echo "API Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ½Ğ° http://localhost:80"
```

---

**Ğ¤Ğ°Ğ¹Ğ»: `scripts/stop.sh`**

```bash
#!/bin/bash

echo "ğŸ›‘ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²..."

if [ "$1" == "prod" ]; then
    docker compose -f docker-compose.prod.yml down
else
    docker compose down
fi

echo "âœ… ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹"
```

---

**Ğ¤Ğ°Ğ¹Ğ»: `scripts/logs.sh`**

```bash
#!/bin/bash

SERVICE=${1:-""}

if [ "$SERVICE" == "" ]; then
    echo "ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²..."
    docker compose logs -f
else
    echo "ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ² ÑĞµÑ€Ğ²Ğ¸ÑĞ°: $SERVICE"
    docker compose logs -f "$SERVICE"
fi
```

---

**Ğ¤Ğ°Ğ¹Ğ»: `scripts/db-backup.sh`**

```bash
#!/bin/bash
set -e

BACKUP_DIR="./backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)

mkdir -p "$BACKUP_DIR"

echo "ğŸ“¦ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ±ÑĞºĞ°Ğ¿Ğ° Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…..."

# Ğ‘ÑĞºĞ°Ğ¿ API Ğ‘Ğ”
docker exec budget-postgres-api-prod pg_dump -U "$DB_USER" budget_api > "$BACKUP_DIR/api_$TIMESTAMP.sql"
echo "âœ… API Ğ±ÑĞºĞ°Ğ¿: $BACKUP_DIR/api_$TIMESTAMP.sql"

# Ğ‘ÑĞºĞ°Ğ¿ Notifications Ğ‘Ğ”
docker exec budget-postgres-notifications-prod pg_dump -U "$DB_USER" budget_notifications > "$BACKUP_DIR/notifications_$TIMESTAMP.sql"
echo "âœ… Notifications Ğ±ÑĞºĞ°Ğ¿: $BACKUP_DIR/notifications_$TIMESTAMP.sql"

echo "âœ… Ğ‘ÑĞºĞ°Ğ¿ Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½"
```

---

**Ğ¤Ğ°Ğ¹Ğ»: `Makefile`**

```makefile
.PHONY: dev prod stop test lint logs backup

# Development
dev:
	./scripts/dev.sh

dev-infra:
	docker compose up -d postgres-api postgres-notifications rabbitmq

# Production
prod:
	./scripts/start-prod.sh

stop:
	./scripts/stop.sh

stop-prod:
	./scripts/stop.sh prod

# Testing
test:
	npm run api:test && npm run notifications:test

test-cov:
	cd api && bun test tests/unit --coverage

# Code quality
lint:
	npm run check-all

format:
	npm run format

# Logs
logs:
	./scripts/logs.sh

logs-api:
	./scripts/logs.sh api

logs-notifications:
	./scripts/logs.sh notifications

# Backup
backup:
	./scripts/db-backup.sh
```

---

## 4. Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### 4.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

**Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ĞšĞ›Ğ˜Ğ•ĞĞ¢                                  â”‚
â”‚                    (Web/Mobile App)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP/HTTPS
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         NGINX                                   â”‚
â”‚              (Reverse Proxy + Rate Limiting)                    â”‚
â”‚                                                                 â”‚
â”‚  â€¢ Rate Limiting: auth 5r/min, general 10r/sec                 â”‚
â”‚  â€¢ Security Headers (X-Frame-Options, CSP, etc.)               â”‚
â”‚  â€¢ SSL Termination (production)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                               â”‚
              â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       API SERVICE       â”‚     â”‚  NOTIFICATIONS SERVICE  â”‚
â”‚      (Fastify + Bun)    â”‚     â”‚     (Fastify + Bun)     â”‚
â”‚                         â”‚     â”‚                         â”‚
â”‚  â€¢ Auth (JWT)           â”‚     â”‚  â€¢ Telegram Bot         â”‚
â”‚  â€¢ Transactions         â”‚â”€â”€â”€â”€â–¶â”‚  â€¢ Event Handlers       â”‚
â”‚  â€¢ Budgets              â”‚     â”‚  â€¢ User Settings        â”‚
â”‚  â€¢ Goals                â”‚     â”‚                         â”‚
â”‚  â€¢ Categories           â”‚     â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                               â”‚
            â”‚                               â”‚
            â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    POSTGRESQL (API)     â”‚     â”‚ POSTGRESQL (Notifications)â”‚
â”‚                         â”‚     â”‚                         â”‚
â”‚  â€¢ Users                â”‚     â”‚  â€¢ NotificationSettings â”‚
â”‚  â€¢ RefreshTokens        â”‚     â”‚                         â”‚
â”‚  â€¢ Categories           â”‚     â”‚                         â”‚
â”‚  â€¢ Transactions         â”‚     â”‚                         â”‚
â”‚  â€¢ Budgets              â”‚     â”‚                         â”‚
â”‚  â€¢ BudgetLimits         â”‚     â”‚                         â”‚
â”‚  â€¢ Goals                â”‚     â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â”‚                               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚       RABBITMQ          â”‚
              â”‚    (Message Broker)     â”‚
              â”‚                         â”‚
              â”‚  Events:                â”‚
              â”‚  â€¢ TRANSACTION_CREATED  â”‚
              â”‚  â€¢ GOAL_DEPOSIT         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:**

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | ĞŸĞ¾Ñ€Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|------|----------|
| **API** | 3000 | REST API Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ¾Ğ¼. ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ÑĞµ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| **Notifications** | 3001 | Ğ¡ĞµÑ€Ğ²Ğ¸Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹. Ğ¡Ğ»ÑƒÑˆĞ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¸Ğ· RabbitMQ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ² Telegram |
| **PostgreSQL API** | 5432 | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ API |
| **PostgreSQL Notifications** | 5433 | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ |
| **RabbitMQ** | 5672 | Ğ‘Ñ€Ğ¾ĞºĞµÑ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ |
| **Nginx** | 80/443 | Reverse proxy Ñ rate limiting Ğ¸ security headers |

---

**ER-Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… API:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      User        â”‚     â”‚   RefreshToken   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”¤â”‚ id (PK)          â”‚
â”‚ email            â”‚     â”‚ token            â”‚
â”‚ password         â”‚     â”‚ userId (FK)      â”‚
â”‚ createdAt        â”‚     â”‚ expiresAt        â”‚
â”‚ updatedAt        â”‚     â”‚ createdAt        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Category      â”‚     â”‚   Transaction    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â—€â”€â”€â”€â”¤â”‚ id (PK)          â”‚
â”‚ name             â”‚     â”‚ amount           â”‚
â”‚ type             â”‚     â”‚ type (INCOME/    â”‚
â”‚ userId (FK)      â”‚     â”‚       EXPENSE)   â”‚
â”‚ isSystem         â”‚     â”‚ description      â”‚
â”‚ createdAt        â”‚     â”‚ categoryId (FK)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ userId (FK)      â”‚
                         â”‚ createdAt        â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Budget       â”‚     â”‚   BudgetLimit    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â”€â”€â”€â”€â”¤â”‚ id (PK)          â”‚
â”‚ month            â”‚     â”‚ amount           â”‚
â”‚ year             â”‚     â”‚ budgetId (FK)    â”‚
â”‚ userId (FK)      â”‚     â”‚ categoryId (FK)  â”‚
â”‚ createdAt        â”‚     â”‚ createdAt        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Goal        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚
â”‚ name             â”‚
â”‚ targetAmount     â”‚
â”‚ currentAmount    â”‚
â”‚ completed        â”‚
â”‚ userId (FK)      â”‚
â”‚ createdAt        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.2 API Reference

**Base URL:** `http://localhost:8080/api` (Ñ‡ĞµÑ€ĞµĞ· Nginx) Ğ¸Ğ»Ğ¸ `http://localhost:3000` (Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ)

---

#### ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

Ğ’ÑĞµ Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğµ endpoints Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº:
```
Authorization: Bearer <access_token>
```

---

#### Auth endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| POST | `/auth/register` | Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| POST | `/auth/login` | ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| POST | `/auth/refresh` | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² |
| POST | `/auth/logout` | Ğ’Ñ‹Ñ…Ğ¾Ğ´ |

**POST /auth/register**

```json
// Request
{
  "email": "user@example.com",
  "password": "securePassword123"
}

// Response 201
{
  "user": {
    "id": "uuid",
    "email": "user@example.com"
  },
  "tokens": {
    "accessToken": "eyJhbG...",
    "refreshToken": "eyJhbG..."
  }
}

// Response 409
{
  "error": "User with this email already exists"
}
```

**POST /auth/login**

```json
// Request
{
  "email": "user@example.com",
  "password": "securePassword123"
}

// Response 200
{
  "user": {
    "id": "uuid",
    "email": "user@example.com"
  },
  "tokens": {
    "accessToken": "eyJhbG...",
    "refreshToken": "eyJhbG..."
  }
}

// Response 401
{
  "error": "Invalid credentials"
}
```

**POST /auth/refresh**

```json
// Request
{
  "refreshToken": "eyJhbG..."
}

// Response 200
{
  "accessToken": "eyJhbG...",
  "refreshToken": "eyJhbG..."
}
```

---

#### Transactions endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| GET | `/transactions` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ |
| GET | `/transactions/:id` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ |
| POST | `/transactions` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ |
| PUT | `/transactions/:id` | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ |
| DELETE | `/transactions/:id` | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ |

**POST /transactions**

```json
// Request
{
  "amount": 1500.00,
  "type": "EXPENSE",
  "description": "ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²",
  "categoryId": "category-uuid"
}

// Response 201
{
  "id": "uuid",
  "amount": 1500.00,
  "type": "EXPENSE",
  "description": "ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²",
  "categoryId": "category-uuid",
  "userId": "user-uuid",
  "createdAt": "2026-01-19T12:00:00Z"
}
```

---

#### Budgets endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| GET | `/budgets` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ¾Ğ² |
| GET | `/budgets/:id` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚ |
| POST | `/budgets` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚ |
| PUT | `/budgets/:id` | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚ |
| DELETE | `/budgets/:id` | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚ |
| POST | `/budgets/:id/limits` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ |

**POST /budgets**

```json
// Request
{
  "month": 1,
  "year": 2026
}

// Response 201
{
  "id": "uuid",
  "month": 1,
  "year": 2026,
  "userId": "user-uuid",
  "limits": [],
  "createdAt": "2026-01-19T12:00:00Z"
}
```

**POST /budgets/:id/limits**

```json
// Request
{
  "categoryId": "category-uuid",
  "amount": 10000.00
}

// Response 201
{
  "id": "uuid",
  "budgetId": "budget-uuid",
  "categoryId": "category-uuid",
  "amount": 10000.00
}
```

---

#### Goals endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| GET | `/goals` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ†ĞµĞ»ĞµĞ¹ |
| GET | `/goals/:id` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ |
| POST | `/goals` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ |
| PUT | `/goals/:id` | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ |
| DELETE | `/goals/:id` | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ |
| POST | `/goals/:id/deposit` | Ğ’Ğ½ĞµÑÑ‚Ğ¸ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ |

**POST /goals**

```json
// Request
{
  "name": "ĞÑ‚Ğ¿ÑƒÑĞº",
  "targetAmount": 100000.00
}

// Response 201
{
  "id": "uuid",
  "name": "ĞÑ‚Ğ¿ÑƒÑĞº",
  "targetAmount": 100000.00,
  "currentAmount": 0,
  "completed": false,
  "userId": "user-uuid",
  "createdAt": "2026-01-19T12:00:00Z"
}
```

**POST /goals/:id/deposit**

```json
// Request
{
  "amount": 5000.00
}

// Response 200
{
  "id": "uuid",
  "name": "ĞÑ‚Ğ¿ÑƒÑĞº",
  "targetAmount": 100000.00,
  "currentAmount": 5000.00,
  "completed": false
}
```

---

#### Categories endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| GET | `/categories` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹ |
| POST | `/categories` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ |
| PUT | `/categories/:id` | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ |
| DELETE | `/categories/:id` | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ |

---

#### Ğ¡Ğ»ÑƒĞ¶ĞµĞ±Ğ½Ñ‹Ğµ endpoints

| ĞœĞµÑ‚Ğ¾Ğ´ | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-------|----------|----------|
| GET | `/health` | Health check |
| GET | `/metrics` | Prometheus Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ |
| GET | `/docs` | Swagger Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ |

---

### 4.3 Workflow Ğ¸ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     POST /auth/register      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   API   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        â–¼                        â”‚
                    â”‚  1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ email Ğ¸ password (Zod)           â”‚
                    â”‚  2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ email                 â”‚
                    â”‚  3. Ğ¥ĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ (bcrypt)                â”‚
                    â”‚  4. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ User Ğ² Ğ‘Ğ”                         â”‚
                    â”‚  5. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ JWT Ğ¿Ğ°Ñ€Ñ‹ (access + refresh)      â”‚
                    â”‚  6. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ RefreshToken Ğ² Ğ‘Ğ”               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     { user, tokens }             â”‚
â”‚ Client â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸ĞµĞ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    POST /transactions    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    TRANSACTION_CREATED    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚   API   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚   RabbitMQ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
                    â”‚                    â–¼                   â”‚                    â”‚
                    â”‚  1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°              â”‚                    â”‚
                    â”‚  2. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Zod)            â”‚                    â”‚
                    â”‚  3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸                â”‚                    â”‚
                    â”‚  4. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸               â”‚                    â”‚
                    â”‚  5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ² Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°          â”‚                    â”‚
                    â”‚  6. ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ² RabbitMQ     â”‚                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
                                         â”‚                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      { transaction }          â”‚                                        â”‚
â”‚ Client â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                        â”‚
                                                                                  â”‚
                                                                                  â–¼
                                                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                   â”‚ Notifications Service â”‚
                                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                               â”‚
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚                                    â–¼               â”‚
                                          â”‚  1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸                  â”‚
                                          â”‚  2. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ               â”‚
                                          â”‚  3. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ chatId Ğ¸Ğ· Ğ‘Ğ”                        â”‚
                                          â”‚  4. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ                        â”‚
                                          â”‚  5. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Telegram                           â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                               â”‚
                                                                               â–¼
                                                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                   â”‚      Telegram         â”‚
                                                                   â”‚   (Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ)       â”‚
                                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ²

```
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚            Access Token                 â”‚
                           â”‚         (ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğ¶Ğ¸Ğ²ÑƒÑ‰Ğ¸Ğ¹: 15m)           â”‚
                           â”‚                                         â”‚
                           â”‚  â€¢ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸         â”‚
                           â”‚  â€¢ Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°            â”‚
                           â”‚  â€¢ ĞĞµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ               â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â”‚ Ğ¸ÑÑ‚Ñ‘Ğº?
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    POST /auth/refresh    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚            Refresh Token                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚         (Ğ´Ğ¾Ğ»Ğ³Ğ¾Ğ¶Ğ¸Ğ²ÑƒÑ‰Ğ¸Ğ¹: 7d)              â”‚
                                    â”‚                                         â”‚
                                    â”‚  â€¢ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ refresh      â”‚
                                    â”‚  â€¢ Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² Ğ‘Ğ” (RefreshToken)         â”‚
                                    â”‚  â€¢ ĞĞ´Ğ½Ğ¾Ñ€Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ (Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸ refresh)    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  ĞĞ¾Ğ²Ğ°Ñ JWT Ğ¿Ğ°Ñ€Ğ°:    â”‚
                                    â”‚  â€¢ new accessToken  â”‚
                                    â”‚  â€¢ new refreshToken â”‚
                                    â”‚                     â”‚
                                    â”‚  Ğ¡Ñ‚Ğ°Ñ€Ñ‹Ğ¹ refresh     â”‚
                                    â”‚  ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ÑÑ Ğ¸Ğ· Ğ‘Ğ”    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.4 Ğ ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ

#### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞµÑ€ÑĞ¸Ñ | Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° |
|-----------|--------|-----------|
| **Bun** | 1.3.5+ | `curl -fsSL https://bun.sh/install \| bash` |
| **Docker** | 24.0+ | https://docs.docker.com/get-docker/ |
| **Docker Compose** | 2.20+ | Ğ’ĞºĞ»ÑÑ‡Ñ‘Ğ½ Ğ² Docker Desktop |

---

#### ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `.env.example` Ğ² `.env` Ğ¸ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ:

```bash
cp .env.example .env
```

**ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:**

| ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ |
|------------|----------|--------|
| `DB_USER` | ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ PostgreSQL | `postgres` |
| `DB_PASSWORD` | ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ PostgreSQL | `secure_password` |
| `JWT_ACCESS_SECRET` | Ğ¡ĞµĞºÑ€ĞµÑ‚ Ğ´Ğ»Ñ access Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² (Ğ¼Ğ¸Ğ½. 32 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°) | `your-32-char-secret-key-here!!` |
| `JWT_REFRESH_SECRET` | Ğ¡ĞµĞºÑ€ĞµÑ‚ Ğ´Ğ»Ñ refresh Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² (Ğ¼Ğ¸Ğ½. 32 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°) | `another-32-char-secret-key!!!` |
| `TELEGRAM_BOT_TOKEN` | Ğ¢Ğ¾ĞºĞµĞ½ Telegram Ğ±Ğ¾Ñ‚Ğ° | `123456:ABC-DEF...` |

**ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:**

| ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ |
|------------|----------|--------------|
| `JWT_ACCESS_EXPIRES_IN` | Ğ’Ñ€ĞµĞ¼Ñ Ğ¶Ğ¸Ğ·Ğ½Ğ¸ access Ñ‚Ğ¾ĞºĞµĞ½Ğ° | `15m` |
| `JWT_REFRESH_EXPIRES_IN` | Ğ’Ñ€ĞµĞ¼Ñ Ğ¶Ğ¸Ğ·Ğ½Ğ¸ refresh Ñ‚Ğ¾ĞºĞµĞ½Ğ° | `7d` |
| `RABBITMQ_USER` | ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ RabbitMQ | `guest` |
| `RABBITMQ_PASSWORD` | ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ RabbitMQ | `guest` |

---

#### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² Development Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ

**Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± 1: Makefile**

```bash
make dev
```

**Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± 2: ĞŸĞ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ¾**

```bash
# 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
bun install

# 2. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ (PostgreSQL, RabbitMQ)
docker compose up -d postgres-api postgres-notifications rabbitmq

# 3. ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ‘Ğ” (5-10 ÑĞµĞºÑƒĞ½Ğ´)
sleep 10

# 4. ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
cd api && bunx prisma migrate dev && cd ..
cd notifications && bunx prisma migrate dev && cd ..

# 5. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Prisma ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
cd api && bunx prisma generate && cd ..
cd notifications && bunx prisma generate && cd ..

# 6. Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
npm run api:dev &
npm run notifications:dev &
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°:**
- API: http://localhost:3000/health
- Swagger: http://localhost:3000/docs
- Notifications: http://localhost:3001/health

---

#### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² Production Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ

```bash
# 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° .env Ñ„Ğ°Ğ¹Ğ»Ğ°
cat .env  # ÑƒĞ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ, Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ñ‹

# 2. Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· Makefile
make prod

# Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑĞºÑ€Ğ¸Ğ¿Ñ‚
./scripts/start-prod.sh
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°:**
- API (Ñ‡ĞµÑ€ĞµĞ· Nginx): http://localhost:80/api/health
- Swagger: http://localhost:80/api/docs

---

#### ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Telegram Ğ±Ğ¾Ñ‚Ğ°

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ±Ğ¾Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· [@BotFather](https://t.me/BotFather)
2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ñ‚Ğ¾ĞºĞµĞ½ Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ² `TELEGRAM_BOT_TOKEN`
3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
4. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ `/start` Ğ±Ğ¾Ñ‚Ñƒ â€” Ğ¾Ğ½ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ Ğ²Ğ°Ñˆ `chatId`
5. ĞŸÑ€Ğ¸Ğ²ÑĞ¶Ğ¸Ñ‚Ğµ `chatId` Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ‡ĞµÑ€ĞµĞ· API Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº

---

### 4.5 Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

#### Ğ—Ğ°Ğ¿ÑƒÑĞº unit Ñ‚ĞµÑÑ‚Ğ¾Ğ²

```bash
# Ğ’ÑĞµ unit Ñ‚ĞµÑÑ‚Ñ‹
npm run api:test
npm run notifications:test

# Ğ¡ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸ĞµĞ¼
cd api && bun test tests/unit --coverage
```

#### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ‚ĞµÑÑ‚Ğ¾Ğ²

```
api/tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ auth.service.spec.ts        # Ğ¢ĞµÑÑ‚Ñ‹ auth ÑĞµÑ€Ğ²Ğ¸ÑĞ°
â”‚   â”œâ”€â”€ goal.service.spec.ts        # Ğ¢ĞµÑÑ‚Ñ‹ goal ÑĞµÑ€Ğ²Ğ¸ÑĞ°
â”‚   â””â”€â”€ controllers/
â”‚       â”œâ”€â”€ auth.controller.spec.ts
â”‚       â”œâ”€â”€ budget.controller.spec.ts
â”‚       â”œâ”€â”€ category.controller.spec.ts
â”‚       â”œâ”€â”€ goal.controller.spec.ts
â”‚       â””â”€â”€ transaction.controller.spec.ts
â””â”€â”€ helpers/
    â””â”€â”€ mock-factories.ts           # Ğ¤Ğ°Ğ±Ñ€Ğ¸ĞºĞ¸ Ğ¼Ğ¾ĞºĞ¾Ğ²
```

#### Ğ˜Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ

**Bun + Fastify `inject()` incompatibility:**

Bun's HTTP handling Ğ¸Ğ¼ĞµĞµÑ‚ Ğ½ĞµÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ñ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ¼ `inject()` Fastify. Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:
- **Unit Ñ‚ĞµÑÑ‚Ñ‹** â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Bun, Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒÑÑ‚ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¸ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ
- **Integration Ñ‚ĞµÑÑ‚Ñ‹** â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ Node.js + Jest + Testcontainers

ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸: `docs/INTEGRATION_BUG.md`

---

### 4.6 Troubleshooting

#### Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ° | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|----------|---------|---------|
| `ECONNREFUSED` Ğº PostgreSQL | Ğ‘Ğ” Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ° | `docker compose up -d postgres-api` |
| `Invalid token` | Ğ˜ÑÑ‚Ñ‘Ğº access token | Ğ’Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ `/auth/refresh` |
| `Prisma Client not generated` | ĞĞµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½ generate | `bunx prisma generate` |
| `Migration failed` | Ğ‘Ğ” Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° | ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ `docker compose logs postgres-api` |
| Telegram Ğ½Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ | ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½ Ğ¸Ğ»Ğ¸ chatId | ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ `TELEGRAM_BOT_TOKEN` |

#### Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:**

```bash
# Health checks
curl http://localhost:3000/health
curl http://localhost:3001/health

# Docker ÑÑ‚Ğ°Ñ‚ÑƒÑ
docker compose ps

# Ğ›Ğ¾Ğ³Ğ¸
make logs
# Ğ¸Ğ»Ğ¸
docker compose logs -f api
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ‘Ğ”:**

```bash
docker exec -it budget-postgres-api psql -U postgres -d budget_api -c "SELECT 1"
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° RabbitMQ:**

```bash
docker exec -it budget-rabbitmq rabbitmqctl list_queues
```

**ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Prometheus):**

```bash
curl http://localhost:3000/metrics
```

---

## 5. Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ

### ĞÑƒĞ´Ğ¸Ñ‚

- [ ] Auth Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½
- [ ] Transactions Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½
- [ ] Budgets Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½
- [ ] Goals Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½
- [ ] Categories Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½
- [ ] Notifications ÑĞµÑ€Ğ²Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½
- [ ] `npm run check-all` Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚
- [ ] Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ°

### Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹

- [ ] `scripts/dev.sh` ÑĞ¾Ğ·Ğ´Ğ°Ğ½ Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] `docker-compose.prod.yml` ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [ ] `scripts/start-prod.sh` ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [ ] `scripts/stop.sh` ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [ ] `scripts/logs.sh` ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [ ] `scripts/db-backup.sh` ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [ ] `Makefile` ÑĞ¾Ğ·Ğ´Ğ°Ğ½

### Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- [ ] ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ°
- [ ] API Reference Ğ³Ğ¾Ñ‚Ğ¾Ğ²
- [ ] Workflow Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹
- [ ] Ğ ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾
- [ ] Ğ Ğ°Ğ·Ğ´ĞµĞ» Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ³Ğ¾Ñ‚Ğ¾Ğ²
- [ ] Troubleshooting Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½: 2026-01-19*
